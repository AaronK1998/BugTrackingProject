<h3>BugListPage</h3>
@page "/fetchbugdetails"
@using BugTrackingProject.Models
@using BugTrackingProject.Data
@inject HttpClient Http
@inject IBugService bugService
@using Syncfusion.Blazor
@using Syncfusion.Blazor.DropDowns

@if(BugList is null)
{
    <h3>Please wait...loading</h3>
}
<div class="col-md-6">
    <a href='/Bug/AddBugList' class="btn btn-primary" role="button">
        <i class="fas fa-user-plus"></i>
        Add New Bug
    </a>
</div>

@if (BugList == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <table class="table table-striped align-middle table-bordered">
        <thead class="table-success">
            <tr>
                <th>Bug Name</th>
                <th>Product Name</th>
                <th>Component</th>
                <th>Status</th>
                <th>User Assigned</th>
                <th>More information</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var bug in BugList)
            {
                <tr>
                    <td>@bug.BugHeading</td>
                    <td>@bug.ProductName</td>
                    <td>@bug.Component</td>
                    <td>@bug.Status</td>
                    <td>@bug.LoginName</td>
                    <td>
                        <a href='/Bug/BugDescriptionPage/@bug.Id' class="btn btn-outline-dark" role="button">
                            More Information </a>
                    </td>
                    <td>
                        <a href='Bug/EditBug/@bug.Id' class="btn btn-outline-dark" role="button">
                            Edit
                        </a>
                        </td>
                    <td>
                        <a href='/Bug/DeleteBug/@bug.Id' class="btn btn-outline-danger" role="button">
                            Delete
                        </a>
                    </td>
                </tr>
            }
        </tbody>

    </table>

<div style="width:750px">
    <SfGrid DataSource="@BugList" AllowPaging="true">
        <GridEditSettings AllowAdding="false" AllowEditing="false" AllowDeleting="false"></GridEditSettings>
        <GridPageSettings PageSize="7"></GridPageSettings>
        <GridColumns>
            <GridColumn IsPrimaryKey="true" Field=@nameof(Bug.Id) HeaderText="ID" Width="40px">
            </GridColumn>
            <GridColumn Field=@nameof(Bug.BugHeading) HeaderText="Bug Name"></GridColumn>
            <GridColumn Field=@nameof(Bug.ProductName) HeaderText="Product Name"></GridColumn>
            <GridColumn Field=@nameof(Bug.Component) HeaderText="Component"></GridColumn>
            <GridColumn Field=@nameof(Bug.Status) HeaderText="Status"></GridColumn>
            <GridColumn Field=@nameof(Bug.LoginName) HeaderText="User Assigned"></GridColumn>
            <GridColumn Field=@nameof(Bug.LastUpdated) Format="d" HeaderText="Last Status Update"></GridColumn>
        </GridColumns>
    </SfGrid>
</div>

@code {

    protected List<Bug> BugList = new();
    protected List<Bug> searchBugData = new();
    protected Bug bugs = new();
    protected override async Task OnInitializedAsync()
    {
        BugList = await Task.Run(() => bugService.GetBugDetails());
    }

}}

